max v2;#N vpatcher 407 117 1121 617;#P origin 0 -4;#P window setfont "Sans Serif" 9.;#P window linecount 2;#P comment 574 436 107 196617 patch by Tom Mays contact@tommays.net;#P window linecount 1;#P newex 167 443 104 196617 s $1-d-out;#B color 13;#P newex 44 443 104 196617 s $1-r-out;#B color 13;#P window linecount 2;#P message 537 150 96 196617 \; $1-persistence 1. \;;#P window linecount 1;#P newex 537 128 44 196617 del 250;#P window linecount 2;#P message 537 94 96 196617 bang \; $1-persistence 0. \;;#P window linecount 1;#P newex 537 65 94 196617 r $1-setreference;#B color 11;#P newex 49 365 98 196617 s $1-out2;#B color 13;#P newex 42 388 104 196617 s $1-out;#B color 13;#N comlet vns stream out (difference);#P outlet 145 421 15 0;#P newex 145 129 134 196617 r $1-persistence;#B color 11;#P newex 145 153 64 196617 linefog 1 40;#B color 5;#P flonum 145 173 35 9 0. 1. 3 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 145 191 73 196617 explinlog -0.1;#P flonum 145 211 61 9 0. 1. 3 3 0 0 0 221 221 221 222 222 222 0 0 0;#P window setfont "Sans Serif" 24.;#P comment 190 341 136 196632 v.presence;#P window setfont "Sans Serif" 9.;#P window linecount 7;#P comment 348 339 221 196617 N.B. v.presence is very susceptible to automatic adjustments by cameras. for effective use of v.presence \, it is recommended that you use a camera where you can turn off AGC (auto gain control) \, auto-iris \, auto-focus \, and auto-white balance. Double-click on v.presence_help below for more assistance.;#P user panel 345 336 227 91;#X brgb 246 182 0;#X frgb 254 203 57;#X border 1;#X rounded 0;#X shadow 0;#X done;#P window linecount 4;#P comment 223 176 299 196617 persistence (float: 0 - 1) Higher persistence is equivalent to longer exposure times and lower responsiveness. Values between 0.99 and 0.9975 are most useful. (use 1. to freeze the current presence reference and 0 to clear it to the current frame);#P toggle 35 175 15 0;#P window linecount 1;#P newex 35 193 31 196617 == 0;#P newex 182 239 136 196617 r $1-noisethresh;#B color 11;#P newex 342 239 115 196617 r $1-absdiff;#B color 11;#P toggle 342 259 15 0;#P newex 35 155 97 196617 r $1-sw;#B color 11;#P message 35 213 55 196617 bypass \$1;#P window linecount 3;#P comment 357 272 156 196617 noise threshold (pixels with less presence than this amount are ignored) (only in absolute mode);#P number 182 259 35 9 0 256 3 3 0 0 0 221 221 221 222 222 222 0 0 0;#P window linecount 1;#P newex 22 340 133 196617 v.presence;#P window linecount 6;#P comment 219 259 101 196617 noise threshold (pixels with less presence than this amount are ignored) (only in absolute mode);#P window linecount 1;#P comment 357 259 156 196617 absolute = 1 / differential = 0;#N comlet vns stream out (reference);#P outlet 22 421 15 0;#P newex 42 29 97 196617 r $1-in;#B color 13;#P newex 22 58 83 196617 testmakevns $2;#B color 5;#P inlet 22 30 15 0;#P toggle 405 63 15 0;#P newex 405 23 67 196617 loadmess $3;#P newex 405 43 31 196617 == 0;#P newex 405 82 38 196617 gate 1;#P newex 405 102 80 196617 s $1-init;#B color 11;#P newex 433 62 70 196617 r camtrk-init;#B color 11;#P window setfont Times 9.;#P window linecount 3;#P comment 190 388 136 1310729 arg 1 : prefix name \; arg 2 : perform jitvns test (1/0) \; arg 3 : disable global init (1/0);#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 219 23 80 196617 r $1-init;#B color 11;#P window linecount 5;#P message 219 49 161 196617 \; $1-sw 0 \; $1-persistence 0. \; $1-noisethresh 40 \; $1-absdiff 1 \;;#P connect 11 0 10 0;#P connect 9 0 10 0;#P connect 10 0 15 0;#P fasten 18 0 15 0 40 304 27 304;#P connect 15 0 12 0;#P connect 19 0 24 0;#P connect 24 0 23 0;#P connect 23 0 18 0;#P connect 15 0 35 0;#P connect 15 0 41 0;#P connect 15 1 36 0;#P connect 29 0 15 1;#P connect 16 0 15 2;#P connect 33 0 32 0;#P connect 32 0 31 0;#P connect 31 0 30 0;#P connect 30 0 29 0;#P connect 20 0 15 3;#P connect 15 1 34 0;#P connect 15 1 42 0;#P connect 22 0 16 0;#P connect 1 0 0 0;#P connect 21 0 20 0;#P connect 7 0 6 0;#P connect 6 0 8 0;#P connect 8 0 5 0;#P connect 5 0 4 0;#P connect 3 0 5 1;#P connect 37 0 38 0;#P connect 38 0 39 0;#P connect 39 0 40 0;#P pop;