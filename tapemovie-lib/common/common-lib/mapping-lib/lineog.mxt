max v2;#N vpatcher 607 259 1117 715;#P window setfont "Sans Serif" 9.;#P comment 376 414 109 196617 contact@tommays.net;#P comment 376 401 100 196617 patch by Tom Mays;#P message 224 288 40 196617 set $1;#P newex 301 242 35 196617 r stop;#B color 11;#P window setfont Times 10.;#P window linecount 2;#P comment 428 117 46 1310730 min grain size;#N comlet min grain size;#P inlet 413 116 15 0;#P window setfont Times 9.;#P number 275 379 35 9 0 0 0 20 0 0 0 221 221 221 222 222 222 0 0 0;#N comlet current grain size;#P outlet 275 398 15 0;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 41 44 128 196617 route int float list stop set;#P window setfont Times 10.;#P comment 211 117 28 1310730 time;#N comlet time;#P inlet 196 116 15 0;#P window setfont Times 9.;#P newex 152 154 54 1310729 i;#P newex 41 97 75 1310729 t b i b;#P message 41 121 17 1310729 0;#P newex 72 73 26 1310729 t b l;#P window setfont "Sans Serif" 9.;#P window linecount 5;#P comment 349 294 134 196617 if destination and time received where destination and current value are equal \, wait the time and send a "done" bang.;#P window linecount 1;#P message 133 104 35 196617 set \$1;#N comlet done;#P outlet 156 379 15 0;#P newex 176 326 24 196617 1;#P newex 176 306 19 196617 t b;#P newex 156 247 30 196617 > 1;#P newex 156 223 27 196617 / 1.;#P newex 156 287 43 196617 i;#P newex 156 267 30 196617 sel 1;#P newex 135 203 27 196617 i;#P comment 168 203 27 196617 time;#P window linecount 3;#P comment 199 247 52 196617 calculate optimal grain size;#N comlet int list stop set;#P inlet 41 23 15 0;#P window linecount 1;#P newex 41 154 108 196617 unpack;#P button 266 332 15 0;#P message 291 289 27 196617 stop;#P window setfont Times 10.;#P newex 266 266 35 1310730 t b b;#P window setfont "Sans Serif" 9.;#P newex 71 224 38 196617 - $1;#P newex 41 203 40 196617 t i b i;#P newex 71 243 23 196617 abs;#P newex 71 263 30 196617 sel 0;#P window linecount 2;#P comment 2 200 39 196617 destin- ation;#P window linecount 1;#P newex 41 180 27 196617 i;#P message 71 283 14 196617 0;#N comlet out;#P outlet 114 379 15 0;#P newex 114 350 52 196617 line $1;#P comment 25 241 44 196617 delta 'y';#P number 288 144 54 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 288 70 50 196617 loadbang;#P message 288 90 55 196617 $2;#P newex 288 108 98 196617 clip 1 2147483647;#P window setfont "Sans Serif" 20.;#P comment 372 208 66 196628 lineog;#P window setfont "Sans Serif" 9.;#P window linecount 2;#P comment 342 143 49 196617 min grain size;#P comment 199 33 205 196617 arg 1 : optional start value \, default = 0 \; arg 2 : minimum grain size (default = 1 ms);#P window linecount 1;#P comment 354 238 130 196617 line with optimal grain size;#P newex 321 314 27 196617 del;#P window setfont Times 9.;#P comment 290 399 73 1310729 current grain size;#P connect 24 0 43 0;#P connect 43 0 39 0;#P connect 43 1 39 0;#P connect 39 0 38 0;#P connect 37 0 38 0;#P fasten 39 1 23 0 78 150 46 150;#P fasten 37 1 23 0 93 150 46 150;#P connect 23 0 14 0;#P connect 14 0 18 0;#P connect 18 2 19 0;#P connect 19 0 17 0;#P connect 17 0 16 0;#P connect 16 0 13 0;#P connect 43 2 37 0;#P fasten 11 0 19 1 119 374 111 374 111 220 104 220;#P connect 43 4 19 1;#P connect 35 0 11 0;#P fasten 18 0 11 0 46 303 119 303;#P connect 49 0 11 0;#P connect 11 0 12 0;#P connect 43 4 35 0;#P connect 18 1 27 0;#P connect 27 0 11 1;#P connect 39 2 40 0;#P fasten 23 1 27 1 144 181 157 181;#P lcolor 7;#P connect 13 0 27 1;#P connect 40 0 27 1;#P lcolor 7;#P connect 27 0 30 0;#P connect 30 0 31 0;#P connect 31 0 28 0;#P connect 28 0 29 0;#P fasten 33 0 11 2 181 346 161 346;#P connect 29 0 11 2;#P connect 22 0 34 0;#P connect 11 1 34 0;#P connect 16 1 30 1;#P connect 9 0 31 1;#P lcolor 1;#P connect 28 1 32 0;#P connect 32 0 33 0;#P fasten 30 0 29 1 161 244 194 244;#P connect 9 0 33 1;#P lcolor 1;#P connect 41 0 40 1;#P connect 38 0 40 1;#P connect 48 0 49 0;#P fasten 43 3 20 0 115 71 271 71;#P lcolor 13;#P connect 20 0 22 0;#P connect 1 0 22 0;#P connect 29 0 45 0;#P lcolor 6;#P connect 33 0 45 0;#P lcolor 6;#P connect 45 0 44 0;#P connect 8 0 7 0;#P connect 7 0 6 0;#P fasten 46 0 9 0 418 137 293 137;#P connect 6 0 9 0;#P connect 20 1 21 0;#P fasten 48 0 21 0 306 287 296 287;#P connect 16 0 1 0;#P connect 21 0 1 0;#P lcolor 1;#P fasten 40 0 1 1 157 175 343 175;#P lcolor 7;#P fasten 23 1 1 1 144 178 343 178;#P lcolor 7;#P pop;