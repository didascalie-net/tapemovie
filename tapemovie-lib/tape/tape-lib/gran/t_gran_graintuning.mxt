max v2;#N vpatcher 558 103 1370 753;#P origin 0 -32;#P window setfont "Sans Serif" 9.;#P window linecount 1;#N vpatcher 10 59 179 306;#N comlet float in;#P inlet 66 36 15 0;#N comlet int out;#P outlet 30 196 15 0;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 66 146 31 196617 - 0.5;#P newex 66 59 27 196617 t f f;#P newex 83 99 27 196617 + 1;#P newex 30 124 46 196617 gate 2;#P newex 83 79 27 196617 < 0.;#P newex 30 174 18 196617 t i;#P newex 30 146 32 196617 + 0.5;#P connect 4 0 3 0;#P connect 3 0 0 0;#P fasten 6 0 1 0 71 168 35 168;#P connect 0 0 1 0;#P connect 1 0 7 0;#P connect 8 0 5 0;#P connect 5 0 3 1;#P connect 3 1 6 0;#P connect 5 1 2 0;#P connect 2 0 4 0;#P pop;#P newobj 88 312 53 196617 p rounder;#B color 6;#P flonum 63 512 44 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 27 273 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 153 428 363 196617 makeparam $1/scale $2 l @initlist 0 2 4 5 7 9 11;#B color 13;#P newex 63 377 320 196617 makeparam $1/scale/sw $2 t 0 0 1 0;#B color 13;#P newex 401 70 321 196617 makeparam $1/tundenom $2 f 2 1 9999 1;#B color 13;#P newex 156 25 321 196617 makeparam $1/tmprmnt% $2 f 0 0 100 1;#B color 13;#P newex 296 50 311 196617 makeparam $1/tunnum $2 f 1 1 9999 1;#B color 13;#P comment 642 599 109 196617 contact@tommays.net;#P comment 642 586 100 196617 patch by Tom Mays;#P newex 63 417 27 196617 + 1;#P window linecount 2;#P message 568 525 206 196617 \; $1/scale 0 2 3 5 7 8 10;#P message 568 494 206 196617 \; $1/scale 0 2 4 5 7 9 11;#P message 568 463 182 196617 \; $1/scale 0 2 4 7 9;#P flonum 156 131 35 9 0. 100. 3 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 88 333 46 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#N comlet trsp in;#P inlet 88 73 15 0;#P flonum 27 333 58 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P window linecount 1;#P newex 27 291 71 196617 gate 2;#P newex 182 231 27 196617 1;#P newex 130 231 27 196617 2;#P newex 88 190 52 196617 t f b;#P newex 130 211 62 196617 oddsf 0 100;#B color 6;#P flonum 88 131 58 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P window linecount 3;#P message 567 390 168 196617 \; $1/tunnum 2.5 \; $1/tundenom 3;#P message 567 348 165 196617 \; $1/tunnum 2 \; $1/tundenom 3;#P message 567 291 171 196617 \; $1/tunnum 1 \; $1/tundenom 16;#P message 567 249 165 196617 \; $1/tunnum 1 \; $1/tundenom 8;#P message 567 207 165 196617 \; $1/tunnum 1 \; $1/tundenom 4;#P message 567 165 165 196617 \; $1/tunnum 1 \; $1/tundenom 2;#P message 567 123 165 196617 \; $1/tunnum 1 \; $1/tundenom 1;#P flonum 401 131 35 9 1. 0 1 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 296 131 35 9 1. 0 1 3 0 0 0 221 221 221 222 222 222 0 0 0;#P window linecount 1;#P newex 296 214 115 196617 pack 0. 0.;#P newex 296 190 115 196617 bondo 2 1;#P message 450 245 29 196617 1 16;#P message 414 245 23 196617 1 8;#P flonum 296 302 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 313 245 23 196617 1 1;#P message 379 245 23 196617 1 4;#P message 346 245 23 196617 1 2;#P newex 296 277 123 196617 expr 12./(($f1/$f2)*2.);#P flonum 296 350 74 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 296 326 113 196617 expr pow(2\\\,(1./$f1));#P comment 332 302 105 196617 divisions of an octave;#P window linecount 4;#P comment 446 194 55 196617 tuning as a fraction expressed as a list;#P window linecount 2;#P comment 411 93 70 196617 transposition deviation amt;#P comment 306 93 66 196617 transposition center value;#P comment 482 243 66 196617 also accepts float values;#P window linecount 1;#P comment 104 73 38 196617 trsp in;#P window linecount 3;#P comment 167 93 76 196617 % of time a tempered pitch will be chosen.;#P window linecount 1;#P newex 63 558 100 196617 expr pow($f2\\\,$f1);#P flonum 63 579 66 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P outlet 63 604 15 0;#N vpatcher 394 44 855 613;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 66 313 90 196617 zl join;#P newex 66 293 73 196617 vexpr $f1-12;#P newex 66 273 90 196617 t l l;#P flonum 66 460 41 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 225 460 46 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 66 502 59 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 66 479 169 196617 + 0.;#P window linecount 0;#P newex 225 437 32 196617 * 12;#P window linecount 1;#P newex 128 46 18 196617 t l;#P newex 225 374 45 196617 t i i;#P number 225 415 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 225 394 31 196617 / 12;#P number 225 356 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 114 397 38 196617 zl join;#P newex 162 379 34 196617 + 12.;#P newex 66 334 107 196617 t l l l;#P newex 66 415 38 196617 zl join;#P newex 66 379 33 196617 - 12.;#P newex 66 355 51 196617 zl ecils 1;#P newex 162 355 51 196617 zl slice 1;#P newex 66 253 43 196617 Lunique;#B color 14;#P newex 66 233 34 196617 Lsort;#B color 14;#P newex 66 213 62 196617 zl group;#P newex 118 131 34 196617 zl len;#P newex 66 193 37 196617 % 12.;#P newex 66 173 34 196617 + 12.;#P message 311 66 112 196617 0 2.14 4 7.78 9 14 16;#P newex 66 131 47 196617 zl iter 1;#P newex 66 152 37 196617 % 12.;#P window linecount 0;#P newex 20 437 56 196617 Lclose;#B color 14;#N comlet scale position corrected trsp out (float);#P outlet 66 522 15 0;#N comlet trsp int;#P inlet 20 26 15 0;#N comlet scale intervals (list) [0 to <12];#P inlet 128 26 15 0;#P message 311 30 98 196617 0 2.14 2.9 4 7.78 9;#P newex 20 70 215 196617 t i i;#P newex 66 111 62 196617 t l l;#P message 311 48 80 196617 0 2.14 4 7.78 9;#P number 20 183 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 20 111 32 196617 % 12;#P number 20 46 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P comment 145 26 150 196617 scale intervals (list) [0 to <12];#P comment 37 26 42 196617 trsp int;#P comment 83 522 185 196617 scale position corrected trsp out (float);#P connect 11 0 3 0;#P connect 3 0 8 0;#P connect 8 0 4 0;#P connect 4 0 5 0;#P connect 5 0 13 0;#P connect 34 0 7 0;#P connect 7 0 15 0;#P connect 15 0 14 0;#P connect 14 0 17 0;#P connect 17 0 18 0;#P connect 18 0 20 0;#P connect 20 0 21 0;#P connect 21 0 22 0;#P connect 22 0 40 0;#P connect 40 0 41 0;#P connect 41 0 42 0;#P connect 42 0 27 0;#P connect 27 0 24 0;#P fasten 24 1 25 0 112 375 71 375;#P connect 25 0 26 0;#P connect 26 0 13 1;#P connect 13 1 39 0;#P connect 39 0 36 0;#P connect 36 0 37 0;#P connect 37 0 12 0;#P connect 29 0 26 1;#P connect 27 1 29 0;#P connect 7 1 19 0;#P connect 19 0 20 1;#P connect 10 0 34 0;#P connect 16 0 34 0;#P connect 6 0 34 0;#P connect 9 0 34 0;#P connect 28 0 29 1;#P connect 40 1 42 1;#P connect 27 2 23 0;#P connect 23 0 28 0;#P connect 8 1 30 0;#P connect 30 0 33 0;#P connect 33 0 31 0;#P connect 31 0 32 0;#P connect 32 0 35 0;#P connect 35 0 38 0;#P connect 38 0 36 1;#P pop;#P newobj 88 460 75 196617 p trsp-to-scale;#B color 5;#P flonum 88 481 40 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 63 438 35 196617 gate 2;#P toggle 63 399 15 0;#P window linecount 4;#P comment 220 456 74 196617 N.B. scale only functions on "tempered" pitches;#P connect 38 0 56 0;#P connect 39 0 56 0;#P connect 56 0 40 0;#P connect 40 0 41 0;#P connect 54 0 1 0;#P connect 1 0 48 0;#P connect 48 0 2 0;#P connect 3 0 57 0;#P connect 2 0 57 0;#P connect 41 0 57 0;#P connect 57 0 7 0;#P connect 7 0 6 0;#P connect 6 0 5 0;#P connect 42 0 35 0;#P connect 35 0 37 0;#P connect 37 0 40 1;#P connect 40 1 58 0;#P connect 58 0 43 0;#P connect 43 0 2 1;#P connect 2 1 4 0;#P connect 4 0 3 0;#P connect 37 1 36 0;#P connect 36 0 38 0;#P connect 55 0 4 1;#P fasten 16 0 7 1 301 552 158 552;#P connect 52 0 44 0;#P connect 44 0 36 1;#P connect 36 1 39 0;#P connect 51 0 26 0;#P connect 26 0 24 0;#P connect 24 0 25 0;#P connect 25 0 17 0;#P connect 20 0 17 0;#P connect 18 0 17 0;#P connect 19 0 17 0;#P connect 22 0 17 0;#P connect 23 0 17 0;#P connect 17 0 21 0;#P connect 21 0 15 0;#P connect 15 0 16 0;#P connect 53 0 27 0;#P connect 27 0 24 1;#P connect 24 1 25 1;#P pop;