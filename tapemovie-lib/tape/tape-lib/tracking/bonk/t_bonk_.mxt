max v2;#N vpatcher 206 120 1327 873;#P window setfont "Sans Serif" 9.;#P newex 109 329 121 196617 r $1;#B color 11;#P newex 397 486 231 196617 makecontrol $1/instvel $1 l 0 0 /tape;#B color 11;#P newex 166 457 27 196617 + 1;#P toggle 166 439 15 0;#P newex 119 481 38 196617 gate 2;#P newex 166 419 328 196617 makeparam $1/amplist/normalize $1 t 0 0 1;#B color 13;#P newex 147 658 193 196617 makecontrol $1/amplist $1 l 0 0 /tape;#B color 11;#P newex 93 689 206 196617 makecontrol $1/rawamplist $1 l 0 0 /tape;#B color 11;#P message 277 345 33 196617 write;#P window linecount 2;#P comment 279 299 127 196617 ¥ Write templates to a file in text-editable format.;#P window linecount 1;#P newex 277 324 121 196617 r $1/write;#B color 11;#P comment 764 243 141 196617 ¥ Read templates from a file.;#P message 764 299 30 196617 read;#P newex 764 278 57 196617 route bang;#P message 811 340 40 196617 <none>;#P button 811 320 15 0;#P window setfont Times 9.;#P newex 953 467 130 1310729 s $1/name;#B color 11;#P window setfont "Sans Serif" 9.;#P newex 953 416 49 196617 strippath;#B color 5;#P newex 880 393 51 196617 tosymbol;#P newex 965 342 51 196617 tosymbol;#P newex 880 416 68 196617 prepend read;#P newex 880 342 62 196617 projectpath;#B color 6;#P window setfont Times 9.;#P newex 880 440 130 1310729 s $1;#B color 11;#P window setfont "Sans Serif" 9.;#P newex 880 319 95 196617 t b s;#P newex 880 368 156 196617 sprintf %sconfig/data/bonk/%s;#P newex 811 299 67 196617 route <none>;#P newex 764 256 221 196617 makeparam $1/read $1 s <none>;#B color 12;#P newex 238 595 242 196617 makeparam $1/amplist/interptime $1 i 0 0 10000;#B color 13;#P window linecount 7;#P comment 667 108 163 196617 ¥ Forget all templates and start learning new ones. The argument gives the number of times you will hit each instrument (10 recommended.) Turn on the output volume above for audible feedback as you train Bonk.;#P window linecount 1;#P comment 667 192 162 196617 ¥ "Learn 0" exits learn mode.;#P newex 371 222 266 196617 makeparam $1/debounce $1 f 0 0 100;#B color 13;#P window linecount 2;#P comment 282 145 381 196617 ¥ Describes how energyin each frequency band masks later energy in the band. Here the masking is total for 4 analysis periods and then drops by 0.7 each period.;#P window linecount 1;#P newex 323 190 266 196617 makeparam $1/mask/drop $1 f 0.7 0 1;#B color 13;#P newex 283 169 264 196617 makeparam $1/mask/periods $1 i 4 1 10;#B color 13;#P flonum 323 211 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P window setfont Times 9.;#P number 283 190 35 9 0 0 0 20 0 0 0 221 221 221 222 222 222 0 0 0;#P window setfont "Sans Serif" 9.;#P newex 283 230 50 196617 pak 0 0.;#P message 283 250 63 196617 mask \$1 \$2;#P newex 223 121 221 196617 makeparam $1/minvel $1 i 7 0 127;#B color 13;#P newex 156 87 266 196617 makeparam $1/thresh/high $1 i 60 0 100;#B color 13;#P newex 107 66 258 196617 makeparam $1/thresh/low $1 i 50 0 100;#B color 13;#P window setfont Times 9.;#P number 156 108 35 9 0 0 0 20 0 0 0 221 221 221 222 222 222 0 0 0;#P number 107 87 35 9 0 0 0 20 0 0 0 221 221 221 222 222 222 0 0 0;#P window setfont "Sans Serif" 9.;#P newex 516 516 127 196617 moduleinit $1;#B color 13;#P window linecount 15;#P message 516 540 275 196617 \; $1/sw/init bang \; $1/thresh/low/init bang \; $1/thresh/high/init bang \; $1/minvel/init bang \; $1/mask/periods/init bang \; $1/mask/drop/init bang \; $1/debounce/init bang \; $1/learn/init bang \; $1/amplist/normalize/init bang \; $1/amplist/interptime/init bang \; $1/amplist/init bang \; $1/rawamplist/init bang \; $1/instvel/init bang \; control_register/store $1 \;;#P window linecount 1;#P newex 397 446 27 196617 gate;#P newex 24 21 416 196617 makeswitch $1/sw $1 tape_switchstate;#B color 13;#P newex 45 64 31 196617 == 0;#P newex 45 103 50 196617 thispoly~;#B color 5;#P toggle 24 41 15 0;#P message 45 84 45 196617 mute \$1;#P newex 86 418 27 196617 gate;#P newex 24 155 35 196617 gate~;#P toggle 24 132 15 0;#P newex 133 127 47 196617 t b i;#N vpatcher 10 59 499 410;#P origin -10 -567;#N comlet interp time (ms);#P inlet 363 78 15 0;#N comlet interp list out;#P outlet 17 308 15 0;#N comlet list in;#P inlet 224 27 15 0;#P window setfont "Sans Serif" 9.;#P number 189 30 24 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P window linecount 0;#P newex 89 183 27 196617 + 1;#P newex 89 163 27 196617 != 0;#P newex 189 52 45 196617 gate 2;#P newex 329 199 45 196617 loadbang;#P message 329 219 135 196617 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.;#P newex 305 243 34 196617 zl reg;#P number 68 142 50 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 224 79 27 196617 t b l;#P newex 17 154 30 196617 t 1 0;#P newex 17 175 61 196617 pack 1. 100;#P newex 17 232 160 196617 pack 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.;#P newex 17 267 298 196617 vexpr $f3+(($f2-$f3)*$f1);#P newex 241 220 74 196617 t l b;#P newex 17 199 40 196617 line 0.;#P window linecount 2;#P comment 380 78 64 196617 interp time (ms);#P window linecount 1;#P comment 242 27 34 196617 list in;#P fasten 8 0 7 0 229 100 22 100;#P connect 7 0 6 0;#P connect 6 0 2 0;#P connect 7 1 2 0;#P connect 2 0 5 0;#P connect 5 0 4 0;#P connect 4 0 18 0;#P fasten 13 0 18 0 194 80 9 80 9 296 22 296;#P lcolor 7;#P fasten 2 0 5 1 22 224 37 224;#P fasten 2 0 5 2 22 224 52 224;#P fasten 2 0 5 3 22 224 67 224;#P connect 19 0 9 0;#P connect 9 0 6 1;#P fasten 2 0 5 4 22 224 82 224;#P connect 9 0 14 0;#P connect 14 0 15 0;#P fasten 2 0 5 5 22 224 97 224;#P fasten 2 0 5 6 22 224 112 224;#P fasten 2 0 5 7 22 224 127 224;#P fasten 2 0 5 8 22 224 142 224;#P fasten 2 0 5 9 22 224 157 224;#P fasten 3 0 4 1 246 258 166 258;#P fasten 2 0 5 10 22 224 172 224;#P fasten 15 0 16 0 94 204 179 204 179 25 194 25;#P lcolor 13;#P connect 16 0 13 0;#P connect 17 0 13 1;#P connect 13 1 8 0;#P connect 8 1 3 0;#P connect 3 1 10 0;#P connect 10 0 4 2;#P connect 12 0 11 0;#P fasten 4 0 10 1 22 289 344 289 344 239 334 239;#P connect 11 0 10 1;#P pop;#P newobj 147 634 101 196617 p interp11f;#B color 6;#P number 238 615 54 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P window linecount 3;#P comment 582 286 159 196617 ¥ Forget the last template. In Learn mode \, use "forget" to erase and record over a template.;#P window linecount 1;#P newex 580 323 124 196617 r $1/forget;#B color 11;#P message 580 344 35 196617 forget;#P newex 103 444 54 196617 t l l;#P number 170 168 50 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 107 168 50 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 107 148 73 196617 minmaxi;#P comment 417 472 166 196617 cooked list out [inst num] [vel] [?];#P comment 239 399 26 196617 raw;#P window linecount 2;#P comment 451 298 108 196617 ¥ Print out all settings and templates.;#P comment 107 41 272 196617 ¥ Set low and high thresholds. Signal growth must exceed the high one and then fall to the low one to make an attack.;#P window linecount 1;#P comment 225 108 269 196617 ¥ Minimum velocity to output (quieter notes are ignored.);#P newex 449 323 118 196617 r $1/print;#B color 11;#P message 449 344 30 196617 print;#P newex 667 206 233 196617 makeparam $1/learn $1 i 0 0 20;#B color 13;#P flonum 371 242 63 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 371 260 63 196617 debounce \$1;#P number 667 225 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 667 242 45 196617 learn \$1;#P newex 107 187 73 196617 pack;#P message 107 207 65 196617 thresh \$1 \$2;#P number 223 142 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 223 161 53 196617 minvel \$1;#P newex 212 566 160 196617 pack 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.;#P newex 147 587 75 196617 vexpr $f1/$f2;#P newex 147 503 75 196617 t l l;#P flonum 212 543 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 212 523 63 196617 maximum 0.;#P window linecount 2;#P comment 634 357 89 196617 Signal Vector Size must be set to 64.;#P toggle 634 411 15 0;#P number 676 411 46 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 662 431 46 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P window linecount 1;#N in~ 1;#P newobj 49 130 31 196617 in~ 1;#P flonum 648 452 58 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 634 390 53 196617 dspstate~;#P newex 231 382 193 196617 bonk~;#B color 5;#P comment 681 47 132 196617 arg 1 : prefix name;#P comment 371 210 192 196617 ¥ Minimum time (msec) between attacks;#P comment 420 399 38 196617 cooked;#P connect 49 0 46 0;#P connect 46 0 42 0;#P connect 42 0 43 0;#P connect 46 0 48 0;#P connect 48 0 45 0;#P connect 45 0 47 0;#P connect 6 0 43 1;#P connect 42 0 44 0;#P fasten 35 0 88 0 108 468 98 468;#P connect 3 0 44 1;#P connect 44 0 35 0;#P connect 55 0 53 0;#P connect 53 0 32 0;#P connect 41 0 32 0;#P connect 32 0 33 0;#P connect 33 0 19 0;#P connect 19 0 18 0;#P connect 93 0 91 0;#P connect 54 0 41 0;#P connect 35 1 91 1;#P connect 91 1 13 0;#P connect 13 0 14 0;#P connect 14 0 40 0;#P fasten 91 0 40 0 124 618 152 618;#P connect 40 0 89 0;#P connect 56 0 54 0;#P connect 90 0 92 0;#P connect 92 0 93 0;#P connect 41 1 32 1;#P connect 32 1 34 0;#P connect 34 0 19 1;#P connect 13 1 11 0;#P connect 11 0 12 0;#P connect 12 0 15 0;#P connect 15 0 14 1;#P connect 57 0 17 0;#P connect 17 0 16 0;#P fasten 12 0 15 1 217 562 232 562;#P fasten 43 0 3 0 29 377 236 377;#P fasten 25 0 3 0 454 368 236 368;#P fasten 22 0 3 0 376 279 236 279;#P fasten 20 0 3 0 672 279 236 279;#P fasten 16 0 3 0 228 181 236 181;#P connect 18 0 3 0;#P fasten 36 0 3 0 585 368 236 368;#P connect 58 0 3 0;#P connect 87 0 3 0;#P connect 95 0 3 0;#P connect 68 0 39 0;#P connect 39 0 40 1;#P fasten 12 0 15 2 217 562 247 562;#P fasten 12 0 15 3 217 562 262 562;#P fasten 12 0 15 4 217 562 277 562;#P connect 85 0 87 0;#P connect 62 0 60 0;#P connect 60 0 59 0;#P connect 59 0 58 0;#P fasten 12 0 15 5 217 562 292 562;#P fasten 12 0 15 6 217 562 307 562;#P fasten 12 0 15 7 217 562 322 562;#P connect 63 0 61 0;#P connect 61 0 59 1;#P fasten 12 0 15 8 217 562 337 562;#P fasten 12 0 15 9 217 562 352 562;#P fasten 12 0 15 10 217 562 367 562;#P connect 65 0 23 0;#P connect 23 0 22 0;#P connect 42 0 50 0;#P connect 50 0 94 0;#P connect 3 1 50 1;#P connect 26 0 25 0;#P connect 52 0 51 0;#P connect 37 0 36 0;#P connect 4 0 9 0;#P connect 4 1 5 0;#P connect 4 2 7 0;#P connect 24 0 21 0;#P connect 21 0 20 0;#P connect 4 3 8 0;#P connect 69 0 82 0;#P connect 82 0 83 0;#P connect 82 1 70 0;#P connect 70 0 80 0;#P connect 80 0 81 0;#P connect 70 1 72 0;#P connect 72 0 74 0;#P connect 74 0 71 0;#P connect 71 0 77 0;#P connect 77 0 75 0;#P connect 75 0 73 0;#P fasten 83 0 73 0 769 437 885 437;#P fasten 77 0 78 0 885 413 958 413;#P connect 78 0 79 0;#P fasten 81 0 79 0 816 462 958 462;#P connect 72 1 76 0;#P connect 76 0 71 1;#P pop;